{% extends 'app/base.html' %}
{% load static %}
{% block title %}Product Detail{% endblock title %}
{% block main-content %}
<style>
  .owl-carousel,.owl-carousel .owl-item{-webkit-tap-highlight-color:transparent;position:relative}.owl-carousel{display:none;width:100%;z-index:1}.owl-carousel .owl-stage{position:relative;-ms-touch-action:pan-Y;touch-action:manipulation;-moz-backface-visibility:hidden}.owl-carousel .owl-stage:after{content:".";display:block;clear:both;visibility:hidden;line-height:0;height:0}.owl-carousel .owl-stage-outer{position:relative;overflow:hidden;-webkit-transform:translate3d(0,0,0)}.owl-carousel .owl-item,.owl-carousel .owl-wrapper{-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-ms-backface-visibility:hidden;-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0)}.owl-carousel .owl-item{min-height:1px;float:left;-webkit-backface-visibility:hidden;-webkit-touch-callout:none}.owl-carousel .owl-item img{display:block;width:100%}.owl-carousel .owl-dots.disabled,.owl-carousel .owl-nav.disabled{display:none}.no-js .owl-carousel,.owl-carousel.owl-loaded{display:block}.owl-carousel .owl-dot,.owl-carousel .owl-nav .owl-next,.owl-carousel .owl-nav .owl-prev{cursor:pointer;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.owl-carousel .owl-nav button.owl-next,.owl-carousel .owl-nav button.owl-prev,.owl-carousel button.owl-dot{background:0 0;color:inherit;border:none;padding:0!important;font:inherit}.owl-carousel.owl-loading{opacity:0;display:block}.owl-carousel.owl-hidden{opacity:0}.owl-carousel.owl-refresh .owl-item{visibility:hidden}.owl-carousel.owl-drag .owl-item{-ms-touch-action:pan-y;touch-action:pan-y;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.owl-carousel.owl-grab{cursor:move;cursor:grab}.owl-carousel.owl-rtl{direction:rtl}.owl-carousel.owl-rtl .owl-item{float:right}.owl-carousel .animated{animation-duration:1s;animation-fill-mode:both}.owl-carousel .owl-animated-in{z-index:0}.owl-carousel .owl-animated-out{z-index:1}.owl-carousel .fadeOut{animation-name:fadeOut}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.owl-height{transition:height .5s ease-in-out}.owl-carousel .owl-item .owl-lazy{opacity:0;transition:opacity .4s ease}.owl-carousel .owl-item .owl-lazy:not([src]),.owl-carousel .owl-item .owl-lazy[src^=""]{max-height:0}.owl-carousel .owl-item img.owl-lazy{transform-style:preserve-3d}.owl-carousel .owl-video-wrapper{position:relative;height:100%;background:#000}.owl-carousel .owl-video-play-icon{position:absolute;height:80px;width:80px;left:50%;top:50%;margin-left:-40px;margin-top:-40px;background:url(owl.video.play.png) no-repeat;cursor:pointer;z-index:1;-webkit-backface-visibility:hidden;transition:transform .1s ease}.owl-carousel .owl-video-play-icon:hover{-ms-transform:scale(1.3,1.3);transform:scale(1.3,1.3)}.owl-carousel .owl-video-playing .owl-video-play-icon,.owl-carousel .owl-video-playing .owl-video-tn{display:none}.owl-carousel .owl-video-tn{opacity:0;height:100%;background-position:center center;background-repeat:no-repeat;background-size:contain;transition:opacity .4s ease}.owl-carousel .owl-video-frame{position:relative;z-index:1;height:100%;width:100%}
  .owl-carousel .item{
      /* border: 1px solid black; */
      font-size: 24px;
      text-align: center;
      margin-top: 20px;;
     }
     
     .owl-next{
      float:right;
     }
     .owl-prev{
      float:left;
     }
     .owl-prev span{
      font-size: 24px;
      font-weight: bold;
     }
     .owl-next span{
      font-size: 24px;
      font-weight: bold;
     }       
.size1{
    display: flex;
    margin-left: 17%;
}
.leftside{
    height: 40vw;
    width: 24vw;
    background-color: #e5e5e5;
}
.text1{
    margin-top: 2%;
    margin-left: 7vw;
}
.text2{
    margin-top: 1.2%;
    margin-left: 11vw;
}
.rightside{
    height: 70vw;
    width: 42vw;

}
.image{
    padding-left: 1.8vw;
}

.details h3{
    margin-left: 3vw;
    color: blue;
}
.details h2{
    margin-left: 2.5vw;
    color: red;
}
#submitButton {
    
        padding: 1.04% 4% ;
        background-color: #4CAF50;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
    }
    #chatbox {

        font-size: 1.2rem;
        height: 740px;
        overflow-y: scroll;
        border: 1px solid #ccc;
        padding: 10px;
    }
    #userInput{
        border: #4CAF50;
        margin-left: 2%;
        padding-right: 62%;
        padding-left: 4%;
        padding-top: 1.2%;
        padding-bottom: 1.2%;
    }
    .bot{
      height: 40px;
      width:900px;
      padding-bottom: 10px;
    }
    #sendMessage{
      height: 40px;
      width: 80px;
    }

</style>
<div class="alert alert-warning alert-dismissible fade show" role="alert">
  <strong>Sorry for the Interuption ! </strong> This page is still in production ,you are requested to visit our other pages . we will make it work very soon .
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
<div class="size1">
<div class="leftside">
    <h3 class="text1">
        Product Details
    </h3>
    <hr>
    <img class="image" src="{{product.product_image.url}}" alt="" class="img-fluid img-thumbnail">
    <div class="details">
    <h3>Product Name : {{product.title}} {{a}}</h3>
    <h4>Brand Name : {{product.brand}}</h4>
    <p>{{product.description}}</p>
    <h2>Current Price - Rs. {{product.selling_price}} <small id="priceofproduct"  class="fw-light text-decoration-line-through">{{product.discounted_price}}</small></h2>
    </div>
</div>
<div class="rightside">
        <h3 class="text2">
            Talk with our Chatbot and start Bargenning
        </h3>
        <hr>
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
          <strong>Sorry !</strong> The Bot is still in production ,you are requested to visit our other pages .
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <div id="chatbox"></div>
        

        <input type="text" class="bot" id="userMessage" placeholder="Type your message...">

        <button type="button" id="sendMessage" class="btn btn-success ">Send </button>



</div>
</div>
<script>
    const chatbox = document.getElementById('chatbox');
    const userMessageInput = document.getElementById('userMessage');
    const sendMessageBtn = document.getElementById('sendMessage');
  
    function displayMessage(text, sender) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${sender}`;
      messageDiv.textContent = text;
      chatbox.appendChild(messageDiv);
      chatbox.scrollTop = chatbox.scrollHeight;
    }
  
    let productPrice = parseFloat(document.getElementById('priceofproduct').textContent);
    const predefinedResponses = {
      'hello': ["Hello! How can I assist you today?", "Hey there! What can I help you with?", "Hi! How can I make your day better?"],
      'who are you': ["I'm your friendly virtual assistant!", "I'm here to help you with anything you need.", "I'm ChatBot, at your service!"],
      'how would you help me': ["I can assist you with product information, answer your questions, and more.", "I'm here to provide information and support for your needs.", "I'm your go-to for all things assistance and information!"],
      'bye': ["Goodbye! Don't hesitate to return if you have more questions.", "Farewell! If you need anything else, I'll be here.", "See you later! Feel free to come back anytime."],
      'default': ["I'm sorry, I don't understand that. Can you please rephrase?", "I'm still learning. Could you try asking that in a different way?", "Hmm, let's talk about something else. What's on your mind?"],

    };
  
    function getResponse(userMessage) {
      userMessage = userMessage.toLowerCase();
      for (const keyword in predefinedResponses) {
        if (userMessage.includes(keyword)) {
          const responses = predefinedResponses[keyword];
          const randomIndex = Math.floor(Math.random() * responses.length);
          return responses[randomIndex];
        }
      }
      if (userMessage.includes('price of product')) {
        return `The price of the product is $${productPrice}.`;
      }
      return predefinedResponses['default'][Math.floor(Math.random() * predefinedResponses['default'].length)];
    }
  
    function sendMessage() {
      const userMessage = userMessageInput.value;
      displayMessage(`You: ${userMessage}`, 'sent');
      userMessageInput.value = '';
  
      const botResponse = getResponse(userMessage);
      displayMessage(`Bot: ${botResponse}`, 'received');
    }

    userMessageInput.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
          sendMessage();
        }
      });
    sendMessageBtn.addEventListener('click', sendMessage);
  </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>



{% endblock main-content %}


